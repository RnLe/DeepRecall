/* Mobile-specific styles for Capacitor iOS app */

/* iOS Safe Area Support */
:root {
  --safe-area-inset-top: env(safe-area-inset-top);
  --safe-area-inset-bottom: env(safe-area-inset-bottom);
  --safe-area-inset-left: env(safe-area-inset-left);
  --safe-area-inset-right: env(safe-area-inset-right);
}

/* Base mobile app styles */
.capacitor-ios {
  /* Prevent bounce scrolling */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  
  /* Full height on iOS */
  height: 100vh;
  height: -webkit-fill-available;
}

/* Touch optimization */
.capacitor-ios * {
  /* Remove iOS tap highlights */
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  
  /* Improve touch responsiveness */
  touch-action: manipulation;
}

/* Canvas-specific optimizations for Apple Pencil */
.capacitor-ios canvas {
  /* Better Apple Pencil response */
  touch-action: none;
  
  /* Prevent iOS zoom on double-tap */
  touch-action: manipulation;
  
  /* Smooth drawing experience */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Annotation mode specific styles */
.capacitor-ios canvas.annotation-active {
  /* Complete touch control for annotation */
  touch-action: none;
  
  /* Prevent any iOS interference */
  -webkit-user-select: none;
  user-select: none;
  
  /* Hardware acceleration for smooth drawing */
  will-change: transform;
}

/* Text selection layer optimizations */
.capacitor-ios .text-layer {
  /* Allow text selection on iOS */
  -webkit-user-select: text;
  user-select: text;
  
  /* But prevent callouts on long press */
  -webkit-touch-callout: none;
}

/* Scrollable content areas */
.capacitor-ios .scrollable {
  /* Smooth scrolling */
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
  
  /* Momentum scrolling */
  scroll-behavior: smooth;
}

/* Status bar accommodation */
.capacitor-ios .status-bar-safe {
  padding-top: var(--safe-area-inset-top);
}

/* Home indicator accommodation */
.capacitor-ios .home-indicator-safe {
  padding-bottom: var(--safe-area-inset-bottom);
}

/* Full safe area support */
.capacitor-ios .safe-area-all {
  padding-top: var(--safe-area-inset-top);
  padding-bottom: var(--safe-area-inset-bottom);
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}

/* iPad-specific styles */
@media (min-width: 768px) {
  .capacitor-ios {
    /* Better landscape support */
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Larger hit targets for iPad */
  .capacitor-ios button {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Apple Pencil hover effects (iPadOS 13.1+) */
@media (hover: hover) and (pointer: fine) {
  .capacitor-ios canvas:hover {
    /* Subtle feedback for Apple Pencil hover */
    opacity: 0.98;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .capacitor-ios {
    /* Ensure proper dark mode handling */
    color-scheme: dark;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .capacitor-ios * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .capacitor-ios {
    /* Enhance contrast for better accessibility */
    filter: contrast(1.2);
  }
}
